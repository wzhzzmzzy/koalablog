---
import Head from '@/components/head/index.astro'
import { DASHBOARD_SETTINGS_ROUTE } from '@/lib/const/config'
import Layout from './layout.astro'

import '@/styles/dashboard.css'

interface Props {
  title?: string
  showHeader?: boolean
}

const { title: metaTitle, showHeader = true } = Astro.props

let host = Astro.url.hostname
const origin = Astro.url.origin
const title = Astro.locals.config.pageConfig.title ?? ''
if (host === 'localhost') {
  host += `:${Astro.url.port}`
}

---
<Layout>
  <Fragment slot="meta">
    <Head title={metaTitle} />
    <slot name="meta" />
  </Fragment>

  {showHeader && (
    <header class="max-w-screen-2xl w-[100%]">
      <h2 class="mb-1">(・∀・) {title}</h2>
      <a class="origin" target="_blank" href={origin}>
        <pre class="mt-1">{host}</pre>
      </a>
      <nav>
        {DASHBOARD_SETTINGS_ROUTE.map(route => (
        <a href={`/dashboard/${route.link}`} class="no-underline">
          {route.name}
        </a>
        ))}
      </nav>
    </header>
  )}
  <main class="flex-1 flex flex-col max-w-screen-2xl mx-auto w-full">
    <slot />
  </main>
  <footer>
    <slot name="footer" />
  </footer>
</Layout>

<style>
nav {
  display: flex;
  gap: 10px;
}
</style>
